<!--
    ioBroker.vis vis-materialdesign Widget-Set

    version: "0.0.1"

    Copyright 2019 Scrounger scrounger@gmx.net
-->
<!-- here you can include so many css as you want -->
<link rel="stylesheet" href="widgets/materialdesign/css/material-components-web.css" />
<link rel="stylesheet" href="widgets/materialdesign/css/material-icons.css" />
<link rel="stylesheet" href="widgets/materialdesign/css/style.css" />

<!-- here you can include so many js-files as you want -->
<script type="text/javascript" src="widgets/materialdesign/js/material-components-web.js"></script>
<script type="text/javascript" src="widgets/materialdesign/js/materialdesign.js"></script>


<!-- the full description of format in data-vis-attrs can be found here:
    https://github.com/ioBroker/ioBroker.vis/blob/master/www/js/visEditInspect.js#L39

    ----------------------------------------------------------
    Mandatory XML attributes:
        id="tplVis-materialdesignWIDGETNAME"
        type="text/ejs"
        class="vis-tpl"

        "type" and "class" are always the same. "id" is unique and must start with "tplSETNAME" and ends with widget name. Use camel-case for it.

    ----------------------------------------------------------
    data-vis-attrs - divided with semicolon the list of attributes, like attr1/id;attr2/color
        Full format of one attribute is: attr_name(start-end)[default_value]/type,idFilter/onChangeFunc
            attr_name - the name of the attribute, e.g. "myID"
            start-end - creates automatically attributes from attr_namestart to attr_nameend, like "myID(1-3)" creates myID1, myID2, myID3
            default_value - by creation of widget this attribute will be filled with this value, e.g. "myID[#001122]/color"
            type - some predefined types have edit helpers, else it will be shown as text field

                Type format:
                      id - Object ID Dialog
                      checkbox
                      image - image
                      number,min,max,step - non-float number. min,max,step are optional
                      color - color picker
                      views - Name of the view
                      effect - jquery UI show/hide effects
                      eff_opt - additional option to effect slide (up, down, left, right)
                      fontName - Font name
                      slider,min,max,step - Default step is ((max - min) / 100)
                      select,value1,value2,... - dropdown select
                      nselect,value1,value2,... - same as select, but without translation of items
                      style,fileFilter,nameFilter,attrFilter
                      custom,functionName,options,... - custom editor - functionName is starting from vis.binds.[widgetset.funct]. E.g. custom/timeAndWeather.editWeather,short
                      group.name - define new or old group. All following attributes belongs to new group till new group.xyz
                      group.name/byindex - like group, but all following attributes will be grouped by ID. Like group.windows/byindex;slide(1-4)/id;slide_type(1-4)/select,open,closed  Following groups will be created Windows1(slide1,slide_type1), Windows2(slide2,slide_type2), Windows3(slide3,slide_type3), Windows4(slide4,slide_type4)
                      text - dialog box with html editor
                      html - dialog box with html editor

                If type is "id", you can define filer for "Select ID Dialog", like "myID/id,level.temperature".
                Additionally you can define callback(onChangeFunc), which will be called if this attribute was changed by user for different purposes: validate entry, fill other attributes, ...

        You can define additional data-vis-attrs line: data-vis-attrs0, data-vis-attrs1. Anyway data-vis-attrs must be there. You may not skip numbers.
        E.g. in "data-vis-attrs="A;" data-vis-attrs1="B" attribute B will be not parsed.

    --------------------------------------------------------
    data-vis-type
        Help information for user. Used for search.
        You can define more than one type divided by comma.
        There are following common types, but you can use your own specific types:
            ctrl   - widget that can write some Object IDs
            val    - widget that shows some information from Object IDs
            static - widget do not read information from Object IDs or URL
            button - button widget
            dimmer - dimmer widget
            weather - weather widget
            ...

    --------------------------------------------------------
    data-vis-set
        Name of the widget set. Must be equal to the name of this HTML file

    --------------------------------------------------------
    data-vis-prev
        Html code used as preview of this widget. If widget is complex you can just use image as preview:
        data-vis-prev='<img src="widgets/hqwidgets/img/prev/Prev_tplVis-materialdesignShowInstance.png"></img>'
        Of course the image must exist.

    --------------------------------------------------------
    data-vis-name
        Readable name of widget shown in vis editor.

    --------------------------------------------------------
    data-vis-beta="true"
        Shows "BETA" symbol in vis editor by preview

    --------------------------------------------------------
    data-vis-update-style="true"
        Call redraw of widget if some of the CSS styles in editor for this widget was changed

    You can read about Magic tags here: http://canjs.com/guides/EJS.html
    Following magic tags are exist:
        <% %> - execute javascript
        <%= %> - place escaped result to HTML document
        <%== %> - place unescaped result to HTML document

    You can do "if" conditions and "for" cycles.

-->

<script id="tplVis-materialdesign-Button-Navigation-vertical"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_button_navigation_vertical.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="navigation"
        data-vis-name="Button Navigation vertical"
        data-vis-attrs="buttonStyle[raised]/select,text,raised,unelevated,outlined;nav_view;"
        data-vis-attrs0="group.label;labelFalse/html;labelColorFalse/color;"
        data-vis-attrs1="group.icon;image/image;invertImage/checkbox;iconHeight/slider,0,200,1;"
        data-vis-attrs2="group.color;colorBgFalse/color;labelColorBgFalse/color;colorPress/color">

        <%
            let buttonStyle = '';
            if (this.data.buttonStyle !== 'text'){
                buttonStyle = 'materialdesign-button--' + this.data.buttonStyle;
            }

            let stylesInvertImageFalse = '';
            if (this.data.invertImage === 'true' || this.data.invertImage === true) {
                stylesInvertImageFalse = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }      
        %>

        <div class="vis-widget materialdesign-button <%= buttonStyle %> <%== this.data.attr('class') %>" style="width:150px; height:100px; padding: 0px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.materialdesign.buttonNavigation(el, data); vis.binds.materialdesign.addRippleEffect(el, data) %>>
            <div class="materialdesign vis-widget-body" style="display: table; width: 100%; height: 100%; background: <%= this.data.attr('colorBgFalse')%>">
                <div style="display: table-row;">                
                    <img class="imgToggleFalse" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> style="width: <%= this.data.attr('iconHeight') + '%' || auto %>; <%= stylesInvertImageFalse %>" />
                </div>
                <div class="labelRowContainer" style="display: table-row; height: 100%; background: <%== this.data.attr('labelColorBgFalse') %>">
                    <span class="labelToggleFalse materialdesign-button__label" style="color: <%== this.data.attr('labelColorFalse') %>;"><%== this.data.attr('labelFalse') %></span>
                </div>
            </div>
        </div>
</script>

<script id="tplVis-materialdesign-Button-Link-vertical"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_button_link_vertical.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="static"
        data-vis-name="Button Link vertical"
        data-vis-attrs="buttonStyle[raised]/select,text,raised,unelevated,outlined;href/url;openNewWindow/checkbox;"
        data-vis-attrs0="group.label;labelFalse/html;labelColorFalse/color;"
        data-vis-attrs1="group.icon;image/image;invertImage/checkbox;iconHeight/slider,0,200,1;"
        data-vis-attrs2="group.color;colorBgFalse/color;labelColorBgFalse/color;colorPress/color">

        <%
            let buttonStyle = '';
            if (this.data.buttonStyle !== 'text'){
                buttonStyle = 'materialdesign-button--' + this.data.buttonStyle;
            }

            let stylesInvertImageFalse = '';
            if (this.data.invertImage === 'true' || this.data.invertImage === true) {
                stylesInvertImageFalse = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }      
        %>

        <div class="vis-widget materialdesign-button <%= buttonStyle %> <%== this.data.attr('class') %>" style="width:150px; height:100px; padding: 0px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" data-val="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.materialdesign.buttonLink(el, data); vis.binds.materialdesign.addRippleEffect(el, data) %>>
            <div class="materialdesign vis-widget-body" style="display: table; width: 100%; height: 100%; background: <%= this.data.attr('colorBgFalse')%>">
                <div style="display: table-row;">                
                    <img class="imgToggleFalse" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> style="width: <%= this.data.attr('iconHeight') + '%' || auto %>; <%= stylesInvertImageFalse %>" />
                </div>
                <div class="labelRowContainer" style="display: table-row; height: 100%; background: <%== this.data.attr('labelColorBgFalse') %>">
                    <span class="labelToggleFalse materialdesign-button__label" style="color: <%== this.data.attr('labelColorFalse') %>;"><%== this.data.attr('labelFalse') %></span>
                </div>
            </div>
        </div>
</script>

<script id="tplVis-materialdesign-Button-State-vertical"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_button_state_vertical.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="ctrl"
        data-vis-name="Button State vertical"
        data-vis-attrs="oid;value;buttonStyle[raised]/select,text,raised,unelevated,outlined;"
        data-vis-attrs0="group.label;labelFalse/html;labelColorFalse/color;"
        data-vis-attrs1="group.icon;image/image;invertImage/checkbox;iconHeight/slider,0,200,1;"
        data-vis-attrs2="group.color;colorBgFalse/color;labelColorBgFalse/color;colorPress/color">

        <%
            let buttonStyle = '';
            if (this.data.buttonStyle !== 'text'){
                buttonStyle = 'materialdesign-button--' + this.data.buttonStyle;
            }

            let stylesInvertImageFalse = '';
            if (this.data.invertImage === 'true' || this.data.invertImage === true) {
                stylesInvertImageFalse = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }      
        %>

        <div class="vis-widget materialdesign-button <%= buttonStyle %> <%== this.data.attr('class') %>" style="width:150px; height:100px; padding: 0px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" data-val="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.basic.state(el); vis.binds.materialdesign.addRippleEffect(el, data) %>>
            <div class="materialdesign vis-widget-body" style="display: table; width: 100%; height: 100%; background: <%= this.data.attr('colorBgFalse')%>">
                <div style="display: table-row;">                
                    <img class="imgToggleFalse" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> style="width: <%= this.data.attr('iconHeight') + '%' || auto %>; <%= stylesInvertImageFalse %>" />
                </div>
                <div class="labelRowContainer" style="display: table-row; height: 100%; background: <%== this.data.attr('labelColorBgFalse') %>">
                    <span class="labelToggleFalse materialdesign-button__label" style="color: <%== this.data.attr('labelColorFalse') %>;"><%== this.data.attr('labelFalse') %></span>
                </div>
            </div>
        </div>
</script>

<script id="tplVis-materialdesign-Button-Toggle-vertical"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_button_toggle_vertical.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="ctrl,state"
        data-vis-name="Button Toggle vertical"
        data-vis-attrs="oid;buttonStyle[raised]/select,text,raised,unelevated,outlined;"
        data-vis-attrs0="group.label;labelFalse/html;labelTrue/html;labelColorFalse/color;labelColorTrue/color;"
        data-vis-attrs1="group.icon;image/image;invertImage/checkbox;imageTrue/image;invertImageTrue/checkbox;iconHeight/slider,0,200,1;"
        data-vis-attrs2="group.color;colorBgFalse/color;colorBgTrue/color;labelColorBgFalse/color;labelColorBgTrue/color;colorPress/color">

    <%
        let buttonStyle = '';
        if (this.data.buttonStyle !== 'text'){
            buttonStyle = 'materialdesign-button--' + this.data.buttonStyle;
        }

        let stylesInvertImageFalse = '';
        if (this.data.invertImage === 'true' || this.data.invertImage === true) {
            stylesInvertImageFalse = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }

        let stylesInvertImageTrue = '';
        if (this.data.invertImageTrue === 'true' || this.data.invertImageTrue === true) {
            stylesInvertImageTrue = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }        
    %>

    <div class="vis-widget materialdesign-button <%= buttonStyle %> <%== this.data.attr('class') %>" style="width:150px; height:100px; padding: 0px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.basic.toggle(el); vis.binds.materialdesign.addRippleEffect(el, data) %>>
        <div class="materialdesign vis-widget-body" style="display: table; width: 100%; height: 100%; background: <%= this.data.attr('colorBgFalse')%>">
            <div style="display: table-row;">                
                <img class="imgToggleFalse" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> style="width: <%= this.data.attr('iconHeight') + '%' || auto %>; <%= stylesInvertImageFalse %>" />
                <img class="imgToggleTrue"  <%= this.data.attr('imageTrue')  ? 'src="' +  this.data.attr('imageTrue')  + '"' : '' %> style="width: <%= this.data.attr('iconHeight') + '%' || auto %>; display:none; <%= stylesInvertImageTrue %>" />
            </div>
            <div class="labelRowContainer" style="display: table-row; height: 100%; background: <%== this.data.attr('labelColorBgFalse') %>">
                <span class="labelToggleFalse materialdesign-button__label" style="color: <%== this.data.attr('labelColorFalse') %>;"><%== this.data.attr('labelFalse') %></span>
                <span class="labelToggleTrue materialdesign-button__label" style="color: <%== this.data.attr('labelColorTrue') %>; display:none"><%== this.data.attr('labelTrue') %></span>
            </div>
            <div <%= (el) -> vis.binds.materialdesign.itoggle(el, this.data) %>></div>
        </div>
    </div>
</script>


<script id="tplVis-materialdesign-Button-Navigation"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_button_navigation.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="navigation"
        data-vis-name="Button Navigation"
        data-vis-attrs="buttonStyle[raised]/select,text,raised,unelevated,outlined;nav_view;buttontext/html;colorPress/color;"
        data-vis-attrs0="group.icon;image/image;invertImage/checkbox;iconHeight/slider,0,200,1;">

        <%
            let buttonStyle = '';
            if (this.data.buttonStyle !== 'text'){
                buttonStyle = 'materialdesign-button--' + this.data.buttonStyle;
            }

            let stylesInvertImage = '';
            if (this.data.invertImage === 'true' || this.data.invertImage === true) {
                stylesInvertImage = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
        %>

        <div class="vis-widget materialdesign-button <%= buttonStyle %> <%== this.data.attr('class') %>" style="width: 100px; height: 30px; padding: 0px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.materialdesign.buttonNavigation(el, data); vis.binds.materialdesign.addRippleEffect(el, data) %>>
            <div class="materialdesign vis-widget-body" style="display:flex; justify-content: center; align-items: center; width: 100%; height: 100%; background: <%= this.data.attr('colorBgFalse')%>">
                <img class="imgButton" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> style="width: <%= this.data.attr('iconHeight') + '%' || auto %>; <%= stylesInvertImage %>" />
                <span class="materialdesign-button__label"><%== this.data.attr('buttontext') %></span>
                <div <%= (el) -> vis.binds.materialdesign.itoggle(el, this.data) %>></div>    
            </div>
        </div>

</script>

<script id="tplVis-materialdesign-Button-Link"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_button_link.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="static"
        data-vis-name="Button Link"
        data-vis-attrs="buttonStyle[raised]/select,text,raised,unelevated,outlined;href/url;openNewWindow/checkbox;buttontext/html;colorPress/color;"
        data-vis-attrs0="group.icon;image/image;invertImage/checkbox;iconHeight/slider,0,200,1;">

        <%
            let buttonStyle = '';
            if (this.data.buttonStyle !== 'text'){
                buttonStyle = 'materialdesign-button--' + this.data.buttonStyle;
            }

            let stylesInvertImage = '';
            if (this.data.invertImage === 'true' || this.data.invertImage === true) {
                stylesInvertImage = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
        %>

        <div class="vis-widget materialdesign-button <%= buttonStyle %> <%== this.data.attr('class') %>" style="width: 100px; height: 30px; padding: 0px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" data-vis-link="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.materialdesign.buttonLink(el, data); vis.binds.materialdesign.addRippleEffect(el, data) %>>
            <div class="materialdesign vis-widget-body" style="display:flex; justify-content: center; align-items: center; width: 100%; height: 100%; background: <%= this.data.attr('colorBgFalse')%>">
                <img class="imgButton" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> style="width: <%= this.data.attr('iconHeight') + '%' || auto %>; <%= stylesInvertImage %>" />
                <span class="materialdesign-button__label"><%== this.data.attr('buttontext') %></span>
                <div <%= (el) -> vis.binds.materialdesign.itoggle(el, this.data) %>></div>    
            </div>
        </div>        
</script>


<script id="tplVis-materialdesign-Button-State"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_button_state.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="ctrl"
        data-vis-name="Button State"
        data-vis-attrs="oid;buttonStyle[raised]/select,text,raised,unelevated,outlined;value;buttontext/html;colorPress/color;"
        data-vis-attrs0="group.icon;image/image;invertImage/checkbox;iconHeight/slider,0,200,1;">
        
        <%
            let buttonStyle = '';
            if (this.data.buttonStyle !== 'text'){
                buttonStyle = 'materialdesign-button--' + this.data.buttonStyle;
            }

            let stylesInvertImage = '';
            if (this.data.invertImage === 'true' || this.data.invertImage === true) {
                stylesInvertImage = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
        %>

        <div class="vis-widget materialdesign-button <%= buttonStyle %> <%== this.data.attr('class') %>" style="width: 100px; height: 30px; padding: 0px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" data-val="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.basic.state(el); vis.binds.materialdesign.addRippleEffect(el, data) %>>
            <div class="materialdesign vis-widget-body" style="display:flex; justify-content: center; align-items: center; width: 100%; height: 100%; background: <%= this.data.attr('colorBgFalse')%>">
                <img class="imgButton" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> style="width: <%= this.data.attr('iconHeight') + '%' || auto %>; <%= stylesInvertImage %>" />
                <span class="materialdesign-button__label"><%== this.data.attr('buttontext') %></span>
                <div <%= (el) -> vis.binds.materialdesign.itoggle(el, this.data) %>></div>    
            </div>
        </div>
</script>


<script id="tplVis-materialdesign-Button-Toggle"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_button_toggle.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="ctrl,state"
        data-vis-name="Button Toggle"
        data-vis-attrs="oid;buttonStyle[raised]/select,text,raised,unelevated,outlined;"
        data-vis-attrs0="group.label;labelFalse/html;labelTrue/html;labelColorFalse/color;labelColorTrue/color;"
        data-vis-attrs1="group.icon;image/image;invertImage/checkbox;imageTrue/image;invertImageTrue/checkbox;iconHeight/slider,0,200,1;"
        data-vis-attrs2="group.color;colorBgFalse/color;colorBgTrue/color;colorPress/color">

    <%
        let buttonStyle = '';
        if (this.data.buttonStyle !== 'text'){
            buttonStyle = 'materialdesign-button--' + this.data.buttonStyle;
        }

        let stylesInvertImageFalse = '';
        if (this.data.invertImage === 'true' || this.data.invertImage === true) {
            stylesInvertImageFalse = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }

        let stylesInvertImageTrue = '';
        if (this.data.invertImageTrue === 'true' || this.data.invertImageTrue === true) {
            stylesInvertImageTrue = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
        }        
    %>      
        
    <div class="vis-widget materialdesign-button <%= buttonStyle %> <%== this.data.attr('class') %>" style="width: 100px; height: 30px; padding: 0px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.basic.toggle(el); vis.binds.materialdesign.addRippleEffect(el, data) %>>
        <div class="materialdesign vis-widget-body" style="display:flex; justify-content: center; align-items: center; width: 100%; height: 100%; background: <%= this.data.attr('colorBgFalse')%>">
            <img class="imgToggleFalse" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> style="width: <%= this.data.attr('iconHeight') + '%' || auto %>; <%= stylesInvertImageFalse %>" />
            <img class="imgToggleTrue"  <%= this.data.attr('imageTrue')  ? 'src="' +  this.data.attr('imageTrue')  + '"' : '' %> style="width: <%= this.data.attr('iconHeight') + '%' || auto %>; display:none; <%= stylesInvertImageTrue %>" />
            <span class="labelToggleFalse materialdesign-button__label" style="color: <%== this.data.attr('labelColorFalse') %>"><%== this.data.attr('labelFalse') %></span>
            <span class="labelToggleTrue materialdesign-button__label" style="color: <%== this.data.attr('labelColorTrue') %>; display:none"><%== this.data.attr('labelTrue') %></span>
            <div <%= (el) -> vis.binds.materialdesign.itoggle(el, this.data) %>></div>    
        </div>
    </div>
</script>

<script id="tplVis-materialdesign-Icon-Button-Navigation"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_icon_button_navigation.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="navigation"
        data-vis-name="Icon Button Navigation"
        data-vis-attrs="nav_view;"
        data-vis-attrs0="group.icon;image/image;invertImage/checkbox;"
        data-vis-attrs1="group.color;colorPress/color">

        <%
            let stylesInvertImageFalse = '';
            if (this.data.invertImage === 'true' || this.data.invertImage === true) {
                stylesInvertImageFalse = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
        %>

        <div class="vis-widget materialdesign-icon-button <%== this.data.attr('class') %>" aria-label="Unstar this item" style="width: 48px; height: 48px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.materialdesign.buttonNavigation(el, data); vis.binds.materialdesign.addRippleEffect(el, data, true) %>>
            <img class="imgToggleFalse" style="width: 100%; height: 100%; <%= stylesInvertImageFalse %>" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> />
        </div>
</script>


<script id="tplVis-materialdesign-Icon-Button-Link"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_icon_button_link.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="static"
        data-vis-name="Icon Button Link"
        data-vis-attrs="href/url;openNewWindow/checkbox;"
        data-vis-attrs0="group.icon;image/image;invertImage/checkbox;"
        data-vis-attrs1="group.color;colorPress/color">

        <%
            let stylesInvertImageFalse = '';
            if (this.data.invertImage === 'true' || this.data.invertImage === true) {
                stylesInvertImageFalse = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
        %>

        <div class="vis-widget materialdesign-icon-button <%== this.data.attr('class') %>" aria-label="Unstar this item" style="width: 48px; height: 48px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" data-val="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.materialdesign.buttonLink(el, data); vis.binds.materialdesign.addRippleEffect(el, data, true) %>>
            <img class="imgToggleFalse" style="width: 100%; height: 100%; <%= stylesInvertImageFalse %>" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> />
        </div>        
</script>

<script id="tplVis-materialdesign-Icon-Button-State"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_icon_button_state.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="ctrl"
        data-vis-name="Icon Button State"
        data-vis-attrs="oid;value;"
        data-vis-attrs0="group.icon;image/image;invertImage/checkbox;"
        data-vis-attrs1="group.color;colorPress/color">

        <%
            let stylesInvertImageFalse = '';
            if (this.data.invertImage === 'true' || this.data.invertImage === true) {
                stylesInvertImageFalse = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
        %>

        <div class="vis-widget materialdesign-icon-button <%== this.data.attr('class') %>" aria-label="Unstar this item" style="width: 48px; height: 48px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" data-val="<%= this.data.attr('value') %>" <%= (el) -> vis.binds.basic.state(el); vis.binds.materialdesign.addRippleEffect(el, data, true) %>>
            <img class="imgToggleFalse" style="width: 100%; height: 100%; <%= stylesInvertImageFalse %>" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> />
        </div>        
</script>

<script id="tplVis-materialdesign-Icon-Button-Toggle"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_icon_button_toggle.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="ctrl,state"
        data-vis-name="Icon Button Toggle"
        data-vis-attrs="oid;"
        data-vis-attrs0="group.icon;image/image;invertImage/checkbox;imageTrue/image;invertImageTrue/checkbox;"
        data-vis-attrs1="group.color;colorBgFalse/color;colorBgTrue/color;colorPress/color">

        <%
            let stylesInvertImageFalse = '';
            if (this.data.invertImage === 'true' || this.data.invertImage === true) {
                stylesInvertImageFalse = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }

            let stylesInvertImageTrue = '';
            if (this.data.invertImageTrue === 'true' || this.data.invertImageTrue === true) {
                stylesInvertImageTrue = "filter: invert(1); -webkit-filter: invert(1); -moz-filter: invert(1); -o-filter: invert(1); -ms-filter: invert(1);";
            }
        %>

        <div class="vis-widget materialdesign-icon-button <%== this.data.attr('class') %>" aria-label="Unstar this item" aria-hidden="true" aria-pressed="false" style="width: 48px; height: 48px;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.materialdesign.mdcIconButtonToggle(el, this.data) %>>
            <img class="imgToggleFalse" style="width: 100%; height: 100%; <%= stylesInvertImageFalse %>" <%= this.data.attr('image') ? 'src="' +  this.data.attr('image') + '"' : '' %> />
            <img class="imgToggleTrue" style="width: 100%; height: 100%; <%= stylesInvertImageTrue %>" <%= this.data.attr('imageTrue')  ? 'src="' +  this.data.attr('imageTrue')  + '"' : '' %> />
        </div>
</script>

<script id="tplVis-materialdesign-Switch"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_switch.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="ctrl,bool"
        data-vis-name="Switch"
        data-vis-update-style="true"
        data-vis-attrs="oid;readOnly/checkbox;"
        data-vis-attrs0="group.label;labelFalse;labelTrue;labelPosition[left]/select,left,right;labelClickActive[true]/checkbox;"
        data-vis-attrs1="group.color;colorSwitchTrue/color;labelColorFalse/color;labelColorTrue/color;">
        
        <%
            let colorSwitchTrue = '';
            if (this.data.colorSwitchTrue !== '' && this.data.colorSwitchTrue !== undefined){
                colorSwitchTrue = '--mdc-theme-secondary: ' + this.data.colorSwitchTrue + ';';
            }

            let labelClickActive = '';
            if (this.data.labelClickActive === 'false' || this.data.labelClickActive === false) {
                labelClickActive = 'pointer-events:none;'
            }

            let labelPosition = '';
            if (this.data.labelPosition === 'left'){
                labelPosition = 'mdc-form-field--align-end'
            }
        %>

        <div class="vis-widget mdc-form-field <%= labelPosition %> materialdesign-switch <%== this.data.attr('class') %>" style="width:80px; height:50px; overflow: visible !important;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.materialdesign.mdcSwitch(el, data) %>>
            <div class="mdc-switch" style="margin-left: 10px; margin-right: 10px; <%= colorSwitchTrue %>">
                <div class="mdc-switch__track"></div>
                <div class="mdc-switch__thumb-underlay">
                    <div class="mdc-switch__thumb">
                        <input class="mdc-switch__native-control" id="materialdesign-checkbox-switch<%= this.data.attr('wid') %>" type="checkbox" data-oid="<%= this.data.attr('oid') %>" role="switch">
                    </div>
                </div>
            </div>
            <label id="label" for="materialdesign-checkbox-switch<%= this.data.attr('wid') %>" style="width: 100%; cursor: pointer; <%= labelClickActive %>">Checkbox 1</label>
        </div>
</script>

<script id="tplVis-materialdesign-CheckBox"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_checkbox.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="ctrl,bool"
        data-vis-name="Checkbox"
        data-vis-update-style="true"
        data-vis-attrs="oid;readOnly/checkbox;"
        data-vis-attrs0="group.label;labelFalse;labelTrue;labelPosition[left]/select,left,right;labelClickActive[true]/checkbox;"
        data-vis-attrs1="group.color;colorCheckBox/color;labelColorFalse/color;labelColorTrue/color;">

        <%
            let colorCheckBox = '';
            if (this.data.colorCheckBox !== '' && this.data.colorCheckBox !== undefined){
                colorCheckBox = '--mdc-theme-secondary: ' + this.data.colorCheckBox + ';';
            }
            
            let labelClickActive = '';
            if (this.data.labelClickActive === 'false' || this.data.labelClickActive === false) {
                labelClickActive = 'pointer-events:none;'
            }

            let labelPosition = '';
            if (this.data.labelPosition === 'left'){
                labelPosition = 'mdc-form-field--align-end'
            }
        %>

        <div class="vis-widget mdc-form-field <%= labelPosition %> materialdesign-checkbox <%== this.data.attr('class') %>" style="width:80px; height:50px; overflow: visible !important;" id="<%= this.data.attr('wid') %>" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.materialdesign.mdcCheckbox(el, data) %>>
            <div class="mdc-checkbox" style="<%= colorCheckBox %>">
                <input type="checkbox" class="mdc-checkbox__native-control" id="materialdesign-checkbox-<%= this.data.attr('wid') %>"/>
                <div class="mdc-checkbox__background">
                <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                    <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
                </svg>
                <div class="mdc-checkbox__mixedmark"></div>
                </div>
            </div>
            <label id="label" for="materialdesign-checkbox-<%= this.data.attr('wid') %>" style="width: 100%; cursor: pointer; <%= labelClickActive %>">Checkbox 1</label>
        </div>
</script>

<script id="tplVis-materialdesign-Slider"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplVis-materialdesign-Slider" style="position: relative; text-align: initial; padding: 4px "><div class="vis-widget_prev materialdesign-slider vis-tpl-materialdesign-Slider " style="width: 110px; height: 50px; padding-left: 5px; padding-right: 5px; overflow: visible !important; left: 244px; top: 582px; position: absolute; z-index: 700;" data-tmodified="true" data-zmodified="true"> <div class="materialdesign vis-widget-prev-body" style="display: flex; justify-content: center; align-items: center;"> <div class="mdc-slider" tabindex="0" role="slider" style="" aria-valuemin="0" aria-valuemax="100" aria-valuenow="39" data-step="1" aria-label="Select Value" data-oid="virtualpowermeter.0.mitValue" data-oid-working=""> <div class="mdc-slider__track-container" style=""> <div class="mdc-slider__track" style="transform: scaleX(0.39);"></div> </div> <div class="mdc-slider__thumb-container" style="transform: translateX(30.641px) translateX(-50%);"> <svg class="mdc-slider__thumb" width="21" height="21"> <circle cx="10.5" cy="10.5" r="7.875"></circle> </svg> <div class="mdc-slider__focus-ring"></div> </div> </div> <span class="labelValue" style="width: 40%; text-align: right;">39 %</span> </div> <div class="ui-resizable-handle ui-resizable-n" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-w" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 90;"></div></div></div>'
        data-vis-set="materialdesign"
        data-vis-type="ctrl,slider,dimmer"
        data-vis-name="Slider"
        data-vis-update-style="true"
        data-vis-attrs="oid;oid-working;min;max;step[1];knobSize[knobSmall]/select,knobSmall,knobMedium,knobBig;initDelay[250]/number;"
        data-vis-attrs0="group.color;colorSliderBg/color;colorSlider/color;"
        data-vis-attrs1="group.label;showValueLabel[true]/checkbox;valueLabelUnit;valueLabelMin;valueLabelMax;valueLabelWidth[25]/slider,0,100,1;">

        <div class="vis-widget materialdesign-slider <%== this.data.attr('class') %>" style="width: 180px; height: 50px; overflow:visible !important;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.materialdesign.mdcSlider(el, data) %>>

        </div>
</script>

<script id="tplVis-materialdesign-Slider-Discrete"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplVis-materialdesign-Slider-Discrete" style="position: relative; text-align: initial; padding: 4px "><div class="vis-widget_prev materialdesign-slider vis-tpl-materialdesign-Discrete Slider " style="width: 110px; height: 50px; padding-left: 5px; padding-right: 5px; overflow: visible !important; left: 341px; top: 357px; position: absolute; z-index: 700;" data-tmodified="true" data-zmodified="true"> <div class="materialdesign vis-widget-prev-body" style="display: flex; justify-content: center; align-items: center;"> <div class="mdc-slider mdc-slider--discrete mdc-slider--display-markers" tabindex="0" role="slider" style="" aria-valuemin="0" aria-valuemax="100" aria-valuenow="60" data-step="20" aria-label="Select Value" data-oid="virtualpowermeter.0.mitValue" data-oid-working=""> <div class="mdc-slider__track-container" style=""> <div class="mdc-slider__track" style="transform: scaleX(0.6);"></div> <div class="mdc-slider__track-marker-container"><div class="mdc-slider__track-marker"></div><div class="mdc-slider__track-marker"></div><div class="mdc-slider__track-marker"></div><div class="mdc-slider__track-marker"></div><div class="mdc-slider__track-marker"></div></div> </div> <div class="mdc-slider__thumb-container" style="transform: translateX(41.25px) translateX(-50%);"> <div class="mdc-slider__pin"> <span class="mdc-slider__pin-value-marker"></span> </div> <svg class="mdc-slider__thumb" width="21" height="21"> <circle cx="10.5" cy="10.5" r="7.875"></circle> </svg> <div class="mdc-slider__focus-ring"></div> </div> </div> <span class="labelValue" style="width: 60%; text-align: right;">60 %</span> </div> <div class="ui-resizable-handle ui-resizable-n" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-w" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 90;"></div></div></div>'
        data-vis-set="materialdesign"
        data-vis-type="ctrl,slider,dimmer"
        data-vis-name="Discrete Slider"
        data-vis-update-style="true"
        data-vis-attrs="oid;oid-working;min;max;step[1];knobSize[knobSmall]/select,knobSmall,knobMedium,knobBig;initDelay[250]/number;"
        data-vis-attrs0="group.color;colorSliderBg/color;colorSlider/color;"
        data-vis-attrs1="group.label;showValueLabel[true]/checkbox;showMarkers/checkbox;valueLabelUnit;valueLabelMin;valueLabelMax;valueLabelWidth[25]/slider,0,100,1;">

        <div class="vis-widget materialdesign-slider <%== this.data.attr('class') %>" style="width: 180px; height: 50px; overflow:visible !important;" id="<%= this.data.attr('wid') %>" <%= (el) -> vis.binds.materialdesign.mdcSlider(el, data, true) %>>

        </div>
</script>

<script id="tplVis-materialdesign-Progress"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplVis-materialdesign-Progress" style="position: relative; text-align: initial; padding: 4px "><div class="vis-widget_prev materialdesign-progress vis-tpl-materialdesign-Progress " style="width: 100px; height: 21px; left: 45px; top: 298px; color: rgb(0, 0, 0); text-align: center; font-size: small; position: absolute; z-index: 700;" data-tmodified="true" data-zmodified="true"> <div class="materialdesign vis-widget-prev-body" style="display: flex; justify-content: center; align-items: center;"> <div role="progressbar" class="mdc-linear-progress" style="text-align: left;" data-oid="info.0.sysinfo.cpu.currentLoad.currentload"> <div class="mdc-linear-progress__buffering-dots"></div> <div class="mdc-linear-progress__buffer"></div> <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar" style="transform: scaleX(0.15);"> <span class="mdc-linear-progress__bar-inner"></span> </div> <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar"> <span class="mdc-linear-progress__bar-inner"></span> </div> </div> <div style="min-width: 7%; position: absolute; width: 100%;"> <label class="labelValue" style=""> 15 % </label> </div> </div> <div class="ui-resizable-handle ui-resizable-n" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-w" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 90;"></div></div></div>'
        data-vis-set="materialdesign"
        data-vis-type="val,progress"
        data-vis-name="Progress"
        data-vis-update-style="true"
        data-vis-attrs="oid;min;max;reverse/checkbox;"
        data-vis-attrs0="group.color;colorBgFalse/color;colorProgress/color;colorOneCondition;colorOne/color;colorTwoCondition;colorTwo/color;"
        data-vis-attrs1="group.label;showValueLabel[true]/checkbox;valueLabelUnit;valueMaxDecimals;valuePosition[inside]/select,inside,outside;valueLabelWidth[25]/slider,0,100,1;">

        
        <%
            let colorProgress = '';
            if (this.data.colorProgress !== '' && this.data.colorProgress !== undefined){
                colorProgress = 'background-color: ' + this.data.colorProgress + ';';
            }

            let colorBgFalse = '';
            if (this.data.colorBgFalse !== '' && this.data.colorBgFalse !== undefined){
                colorBgFalse = 'background-color: ' + this.data.colorBgFalse + ';';
            }

            let showValue = '';
            if (this.data.showValueLabel === 'false' || this.data.showValueLabel === false) {
                showValue = 'display:none;'
            }

            let valuePosition = 'position: relative;';
            if (this.data.valuePosition === 'inside'){
                valuePosition = 'position: absolute; width: 100%;';
            }

            let valueLabelWidth = '0%';
            if (this.data.valueLabelWidth !== undefined && this.data.valueLabelWidth !== null && this.data.valueLabelWidth !== ''){
                valueLabelWidth = this.data.valueLabelWidth + '%';
            }
        %>

        <div class="vis-widget materialdesign-progress <%== this.data.attr('class') %>" style="width: 180px; height: 50px;" id="<%= this.data.attr('wid') %>">
            <div class="materialdesign vis-widget-body" style="display: flex; justify-content: center; align-items: center;">
                <div role="progressbar" class="mdc-linear-progress" style="text-align: left;" data-oid="<%= this.data.attr('oid') %>" <%= (el) -> vis.binds.materialdesign.mdcProgress(el, data) %>>
                    <div class="mdc-linear-progress__buffering-dots"></div>
                    <div class="mdc-linear-progress__buffer" style="<%= colorBgFalse %>"></div>
                    <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
                        <span class="mdc-linear-progress__bar-inner" style="<%= colorProgress %>"></span>
                    </div>
                    <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
                        <span class="mdc-linear-progress__bar-inner"></span>
                    </div>
                </div>
                <div style="min-width: <%= valueLabelWidth %>; <%= valuePosition %>">
                    <label class="labelValue" style="<%= showValue %>">100%</label>
                </div>
            </div>
        </div>
</script>

<script id="tplVis-materialdesign-Card"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<div id="prev_tplVis-materialdesign-Card" style="position: relative; text-align: initial; padding: 4px "><div class="vis-widget_prev materialdesign-html-card mdc-card vis-tpl-materialdesign-HTML Card " style="width: 100px; height: 131px; left: 562px; top: 439px; font-size: xx-large; position: absolute; z-index: 700;" data-tmodified="true" data-zmodified="true"> <div class="mdc-card__media mdc-card__media--16-9" style="background-image: url(/vis/widgets/materialdesign/img/preview.jpg);"></div><div class="materialdesign-html-card card-title-section" style=""><div class="materialdesign-html-card card-title mdc-typography mdc-typography--headline6" style="">Title</div><div class="materialdesign-html-card card-subtitle mdc-typography mdc-typography--subtitle2" style="">Subtitle</div></div><div class="materialdesign-html-card card-text-section"><div class=".materialdesign-html-card mdc-typography mdc-typography--body2"></div></div> <div class="ui-resizable-handle ui-resizable-n" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-w" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 90;"></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 90;"></div></div></div>'
        data-vis-set="materialdesign"
        data-vis-type="static"
        data-vis-name="HTML Card"
        data-vis-attrs="title;titleLayout[headline6]/auto,headline1,headline2,headline3,headline4,headline5,headline6,xx-small,x-small,small,medium,large,x-large,xx-large,smaller,larger;subtitle;subtitleLayout[subtitle2]/auto,subtitle1,subtitle2,xx-small,x-small,small,medium,large,x-large,xx-large,smaller,larger;html/text;htmlLayout[body2]/select,custom,body1,body2;image/image;cardLayout[Basic]/select,Basic,BasicHeader,BasicHeaderOverlay,Horizontal;cardStyle[default]/select,default,outlined;"
        data-vis-attrs0="group.color;colorTitle/color;colorSubtitle/color;">
        
        <%
            let cardStyle = '';
            if (this.data.cardStyle !== 'default'){
                cardStyle = 'mdc-card--outlined';
            }

            let titleLayout ='';
            let titleFontSize ='';
            if (this.data.titleLayout !== undefined && this.data.titleLayout !== null && this.data.titleLayout !== ''){
                if (this.data.titleLayout.includes('headline')){
                    titleLayout = 'mdc-typography--' + this.data.titleLayout;
                } else if(!isNaN(this.data.titleLayout)){
                    titleFontSize = 'font-size: ' + this.data.titleLayout + 'px;';
                } else{
                    titleFontSize = 'font-size: ' + this.data.titleLayout + ';';
                }
            }

            let colorTitle = '';
            if (this.data.colorTitle !== undefined && this.data.colorTitle !== null && this.data.colorTitle !== ''){
                colorTitle = 'color: ' + this.data.colorTitle + ';';
            }

            let subtitleLayout ='';
            let subtitleFontSize ='';
            if (this.data.subtitleLayout !== undefined && this.data.subtitleLayout !== null && this.data.subtitleLayout !== ''){
                if (this.data.subtitleLayout.includes('subtitle')){
                    subtitleLayout = 'mdc-typography--' + this.data.subtitleLayout;
                } else if(!isNaN(this.data.subtitleLayout)){
                    subtitleFontSize = 'font-size: ' + this.data.subtitleLayout + 'px;';                    
                } else{
                    subtitleFontSize = 'font-size: ' + this.data.subtitleLayout + ';';
                }
            }

            let colorSubtitle = '';
            if (this.data.colorSubtitle !== undefined && this.data.colorSubtitle !== null && this.data.colorSubtitle !== ''){
                colorSubtitle = 'color: ' + this.data.colorSubtitle + ';';
            }

            let showImage = 'display: none;';
            if (this.data.image !== undefined && this.data.image !== null && this.data.image !== ''){
                showImage = '';
            }

            let showTitleSection = 'display: none;';
            if ((this.data.title !== undefined && this.data.title !== null && this.data.title !== '') || (this.data.subtitle !== undefined && this.data.subtitle !== null && this.data.subtitle !== '')){
                showTitleSection = '';
            }

            let htmlLayout = '';
            if (this.data.htmlLayout === 'custom'){
                htmlLayout = 'card-custom-body';
            } else {
                htmlLayout = 'mdc-typography mdc-typography--' + this.data.htmlLayout;
            }

            let cardLayout = '';
            if (this.data.cardLayout === 'Basic'){
                cardLayout = 
                    '<div class="mdc-card__media mdc-card__media--16-9" style="' + showImage + 'background-image: url(' + this.data.image + ');"></div>' +
                    '<div class="materialdesign-html-card card-title-section" style="' + showTitleSection + '">' +
                        '<div class="materialdesign-html-card card-title mdc-typography ' + titleLayout + '" style="' + colorTitle + titleFontSize + '">' + this.data.title + '</div>' +
                        '<div class="materialdesign-html-card card-subtitle mdc-typography ' + subtitleLayout + '" style="' + colorSubtitle + subtitleFontSize + '">'+ this.data.subtitle + '</div>' +
                    '</div>' +
                    '<div class="materialdesign-html-card card-text-section">' +
                        '<div class=".materialdesign-html-card ' + htmlLayout + '">' + this.data.html + '</div>' +
                    '</div>'
            }

            if (this.data.cardLayout === 'BasicHeader'){
                cardLayout = 
                    '<div class="materialdesign-html-card card-title-section" style="' + showTitleSection + '">' +
                        '<div class="materialdesign-html-card card-title mdc-typography ' + titleLayout + '" style="' + colorTitle + titleFontSize + '">' + this.data.title + '</div>' +
                        '<div class="materialdesign-html-card card-subtitle mdc-typography ' + subtitleLayout + '" style="' + colorSubtitle + subtitleFontSize + '">'+ this.data.subtitle + '</div>' +
                    '</div>' +
                    '<div class="materialdesign-html-card mdc-card__media mdc-card__media--16-9 BasicHeader" style="' + showImage + 'background-image: url(' + this.data.image + ');"></div>' +
                    '<div class="materialdesign-html-card card-text-section">' +
                            '<div class=".materialdesign-html-card ' + htmlLayout + '">' + this.data.html + '</div>' +
                    '</div>'
            }

            if (this.data.cardLayout === 'BasicHeaderOverlay'){
                cardLayout = 
                cardLayout = 
                    '<div class="mdc-card__media mdc-card__media--16-9" style="' + showImage + 'background-image: url(' + this.data.image + ');">' +
                        '<div class="materialdesign-html-card mdc-card__media-content">' +
                            '<div class="materialdesign-html-card card-title-section" style="' + showTitleSection + '">' +
                                '<div class="materialdesign-html-card card-title mdc-typography ' + titleLayout + '" style="' + colorTitle + titleFontSize + '">' + this.data.title + '</div>' +
                                '<div class="materialdesign-html-card card-subtitle mdc-typography ' + subtitleLayout + '" style="' + colorSubtitle + subtitleFontSize + '">'+ this.data.subtitle + '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                    '<div class="materialdesign-html-card card-text-section">' +
                            '<div class=".materialdesign-html-card ' + htmlLayout + '">' + this.data.html + '</div>' +
                    '</div>'
            }
            
            if (this.data.cardLayout === 'Horizontal'){
                cardLayout = 
                    '<div class="materialdesign-html-card horizontal-container">' +
                        '<div class="materialdesign-html-card mdc-card__media mdc-card__media--square" style="' + showImage + 'background-image: url(' + this.data.image + ');"></div>' +
                        '<div class="materialdesign-html-card card-title-section">' +
                            '<div class="materialdesign-html-card card-title mdc-typography ' + titleLayout + '" style="' + showTitleSection + colorTitle + titleFontSize + '">' + this.data.title + '</div>' +
                            '<div class="materialdesign-html-card card-subtitle mdc-typography ' + subtitleLayout + '" style="' + colorSubtitle + subtitleFontSize + '">'+ this.data.subtitle + '</div>' +
                            '<div class=".materialdesign-html-card ' + htmlLayout + '">' + this.data.html + '</div>' +
                        '</div>' +
                    '</div>'
            }
        %>

        <div class="vis-widget materialdesign-html-card mdc-card <%= cardStyle %> <%== this.data.attr('class') %>" style="width: 200px; height: 130px;" id="<%= this.data.attr('wid') %>">
            <%== cardLayout %>
        </div>
</script>

<script id="tplVis-materialdesign-Drawer"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_top_app_bar_nav_drawer.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="stateful,container,view"
        data-vis-name="Top App Bar Navigation Drawer"
        data-vis-update-style="true"
        data-vis-attrs="oid;persistent/checkbox;notIfInvisible/checkbox;count[1]/number;group.views;contains_view_(0-count)/views;"
        data-vis-attrs0="group.topAppBarLayout;topAppBarLayout[standard]/select,standard,dense,short;titleTopAppBar[Material Design Widgets];colorTopAppBarTitle/color;colorTopAppBarBackground/color;showSelectedItemAsTitle/checkbox;"
        data-vis-attrs1="group.drawerLayout;drawerLayout[modal]/select,modal,dismissible,permanent;drawerItemLayout[standard]/select,standard,backdrop;listItemDividerStyle[standard]/select,standard,padded,inset;drawerWidth/number;z_index/number;showHeader[true]/checkbox;headerLabel[<h4 class='mdc-drawer__title'>Material Design Widgets</h4><h6 class='mdc-drawer__subtitle'>by Scrounger</h6>]/html;showLabels[true]/checkbox;drawerIconHeight/number;listItemTextSize/auto,headline1,headline2,headline3,headline4,headline5,headline6,subtitle1,subtitle2,xx-small,x-small,small,medium,large,x-large,xx-large,smaller,larger;backdropLabelBackgroundHeight/slider,0,100,1;"
        data-vis-attrs2="group.drawerColors;colorDrawerBackground/color;colorDrawerHeaderBackground/color;colorListItemHover/color;colorListItemSelected/color;colorListItemText/color;colorListItemTextSelected/color;colorListItemHeaders/color;colorListItemDivider/color;colorDrawerbackdropLabelBackground/color;colorDrawerbackdropLabelBackgroundActive/color;"
        data-vis-attrs3="group.drawerLabels;labels(0-count);group.drawerHeaders;headers(0-count);group.drawerDivider;dividers(0-count)/checkbox;group.drawerIcons;iconDrawer(0-count)[/vis/widgets/materialdesign/img/IoBroker_Logo.png]/image;">
        
        <%
            let initDrawer = vis.binds.materialdesign.initializeDrawer(data);
            let initTopAppBar = vis.binds.materialdesign.initializeTopAppBar(data);
        %>

        <div class="vis-widget materialdesign-topAppBar-with-Drawer <%== this.data.attr('class') %>" style="width:400px; height: 270px;" id="<%= this.data.attr('wid') %>">
            <div class="drawer-frame-root">
                <aside class="mdc-drawer <%= initDrawer.drawerLayout %>" <%== initDrawer.drawerStyle %> <%= (el) -> vis.binds.materialdesign.mdcTopAppBarWithDrawer(el, data) %>>
                    <%== initDrawer.drawerHeader %>
                    <div class="mdc-drawer__content">
                        <nav class="mdc-list">
                            <%== initDrawer.drawerItemList %>
                        </nav>
                    </div>
                </aside>
                <%== initDrawer.drawerModalScrim %>
                <div class="drawer-frame-app-content">
                    <header class="mdc-top-app-bar drawer-top-app-bar <%== initTopAppBar.headerLayout %>" <%== initTopAppBar.headerStyle %>>
                        <div class="mdc-top-app-bar__row" style="color: <%= this.data.colorTopAppBarTitle %>">
                            <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                                <%== initTopAppBar.headerButtonShow %>
                                <span class="mdc-top-app-bar__title"><%= this.data.titleTopAppBar %></span></section>
                        </div>
                    </header>
                    <div class="mdc-top-app-bar-content <%= initTopAppBar.contentLayout %>">
                        <div>
                            <% if (vis.editMode) { %>
                                <div class="editmode-helper"/>
                            <% } %>
                            <div class="vis-view-container materialdesign-topAppBar-vis-view-container" data-oid="<%= data.attr('oid') %>" data-vis-contains="<%= vis.binds.stateful.value(initDrawer.viewsList, data.attr('oid')) %>" <%= (el) -> vis.binds.stateful.view(el, initDrawer.viewsList, data.attr('persistent'), data.attr('notIfInvisible')) %> />
                        </div>
                    </div>
                </div>
            </div>
        </div>
</script>        

<script id="tplVis-materialdesign-List"
        type="text/ejs"
        class="vis-tpl"
        data-vis-prev='<img src="widgets/materialdesign/img/prev_list.png"></img>'
        data-vis-set="materialdesign"
        data-vis-type="val,ctrl,state,navigation,static,bool"
        data-vis-name="List"
        data-vis-update-style="true"
        data-vis-attrs="count[1]/number;"
        data-vis-attrs0="group.listLayout;listType[text]/select,text,buttonState,buttonToggle,buttonNav,buttonLink,switch,checkbox;listItemDividerStyle[standard]/select,standard,padded,inset;listLayout[standard]/select,standard,card,cardOutlined;"
        data-vis-attrs1="group.listItemLayout;listItemHeight/number;listImageHeight/number;distanceBetweenTextAndImage/number;listItemBackground/color;listItemBackgroundActive/color;colorCheckBox/color;colorListItemHover/color;colorListItemSelected/color;colorListItemText/color;colorListItemHeaders/color;colorListItemDivider/color;listItemTextSize/auto,headline1,headline2,headline3,headline4,headline5,headline6,subtitle1,subtitle2,xx-small,x-small,small,medium,large,x-large,xx-large,smaller,larger;listItemSubTextSize/auto,headline1,headline2,headline3,headline4,headline5,headline6,subtitle1,subtitle2,xx-small,x-small,small,medium,large,x-large,xx-large,smaller,larger;listItemHeaderTextSize/auto,headline1,headline2,headline3,headline4,headline5,headline6,subtitle1,subtitle2,xx-small,x-small,small,medium,large,x-large,xx-large,smaller,larger;"
        data-vis-attrs2="group.oids;oid(0-count);group.listTypes;group.listGroupHeaders;groupHeader(0-count);group.listImages;listImage(0-count)/image;group.listImagesActive;listImageActive(0-count)/image;group.listLabels;label(0-count);group.listSubLabels;subLabel(0-count);group.listDividers;dividers(0-count)/checkbox;group.listTypeButtonStateValues;listTypeButtonStateValue(0-count);group.listTypeButtonNavs;listTypeButtonNav(0-count)/views;group.listTypeButtonLinks;listTypeButtonLink(0-count)/url;">

        <%
            let itemList = [];
            let itemRole = '';
            let listNoneInteractive = '';

            let listLayout = '';
            if (this.data.listLayout === 'card'){
                listLayout = 'materialdesign-list-card';
            } else if (this.data.listLayout === 'cardOutlined'){
                listLayout = 'materialdesign-list-card materialdesign-list-card--outlined';
            }

            let itemHeight = '';
            if (this.data.listItemHeight !== undefined && this.data.listItemHeight !== null && this.data.listItemHeight !== ''){
                itemHeight = 'height: ' + this.data.listItemHeight + 'px;';
            }

            let listItemBackground = '';
            if (this.data.listItemBackground !== undefined && this.data.listItemBackground !== null && this.data.listItemBackground !== ''){
                listItemBackground = 'background: ' + this.data.listItemBackground + ';';
            }

            let imageLeftStyle = '';
            if (this.data.listImageHeight !== undefined && this.data.listImageHeight !== null && this.data.listImageHeight !== ''){
                imageLeftStyle = 'width: auto; height: ' + this.data.listImageHeight + 'px;';
            }

            let distanceBetweenTextAndImage = '';
            if (this.data.distanceBetweenTextAndImage !== undefined && this.data.distanceBetweenTextAndImage !== null && this.data.distanceBetweenTextAndImage !== ''){
                distanceBetweenTextAndImage = 'margin-right: ' + this.data.distanceBetweenTextAndImage + 'px;'
            }

            let colorCheckBox = '';
            if (this.data.colorCheckBox !== undefined && this.data.colorCheckBox !== null && this.data.colorCheckBox !== ''){
                colorCheckBox = '--mdc-theme-secondary: ' + this.data.colorCheckBox + ';';
            }

            // Navigation: Item Label font size
            let listItemTextLayout ='';
            let listItemTextSize ='';
            if (this.data.listItemTextSize !== undefined && this.data.listItemTextSize !== null && this.data.listItemTextSize !== ''){
                if (this.data.listItemTextSize.includes('headline') || this.data.listItemTextSize.includes('subtitle')){
                    listItemTextLayout = 'mdc-typography--' + this.data.listItemTextSize;
                } else if(!isNaN(this.data.listItemTextSize)){
                    listItemTextSize = 'font-size: ' + this.data.listItemTextSize + 'px;';
                } else {
                    listItemTextSize = 'font-size: ' + this.data.listItemTextSize + ';';
                }
            }

            let listItemSubTextLayout ='';
            let listItemSubTextSize ='';
            if (this.data.listItemSubTextSize !== undefined && this.data.listItemSubTextSize !== null && this.data.listItemSubTextSize !== ''){
                if (this.data.listItemSubTextSize.includes('headline') || this.data.listItemSubTextSize.includes('subtitle')){
                    listItemSubTextLayout = 'mdc-typography--' + this.data.listItemSubTextSize;
                } else if(!isNaN(this.data.listItemSubTextSize)){
                    listItemSubTextSize = 'font-size: ' + this.data.listItemSubTextSize + 'px;';
                } else {
                    listItemSubTextSize = 'font-size: ' + this.data.listItemSubTextSize + ';';
                }
            }

            let listItemHeaderTextLayout ='';
            let listItemHeaderTextSize ='';
            if (this.data.listItemHeaderTextSize !== undefined && this.data.listItemHeaderTextSize !== null && this.data.listItemHeaderTextSize !== ''){
                if (this.data.listItemHeaderTextSize.includes('headline') || this.data.listItemHeaderTextSize.includes('subtitle')){
                    listItemHeaderTextLayout = 'mdc-typography--' + this.data.listItemHeaderTextSize;
                } else if(!isNaN(this.data.listItemHeaderTextSize)){
                    listItemHeaderTextSize = 'font-size: ' + this.data.listItemHeaderTextSize + 'px;';
                } else {
                    listItemHeaderTextSize = 'font-size: ' + this.data.listItemHeaderTextSize + ';';
                }
            }

            for (var i=0; i <= this.data.count; i++){
                let itemClass = 'mdc-list-item';

                let header = '';
                if (data.attr('groupHeader' + i) !== undefined && data.attr('groupHeader' + i) !== null && data.attr('groupHeader' + i) !== ''){
                    header = '<h3 class="mdc-list-group__subheader ' + listItemHeaderTextLayout + '" style="' + listItemHeaderTextSize + '">' + data.attr('groupHeader' + i) + '</h3>'
                }

                let labelText = (data.attr('label' + i) !== undefined && data.attr('label' + i) !== null && data.attr('label' + i) !== '') ? data.attr('label' + i) : 'Item ' + i;
                let subLabelText = (data.attr('subLabel' + i) !== undefined && data.attr('subLabel' + i) !== null && data.attr('subLabel' + i) !== '') ? data.attr('subLabel' + i) :'';

                let imageLeftElement = '';
                if (data.attr('listImage' + i) !== undefined && data.attr('listImage' + i) !== null && data.attr('listImage' + i) !== ''){
                    imageLeftElement = '<img class="mdc-list-item__graphic" id="itemImage_' + i + '" src="' + data.attr('listImage' + i) + '" style="' + imageLeftStyle + distanceBetweenTextAndImage + '" >'
                }

                let labelElement = '';
                if (subLabelText !== ''){
                    labelElement = 
                        '<span class="mdc-list-item__text">' +      //TODO: evtl. muss flex wieder raus
                            '<span class="mdc-list-item__primary-text ' + listItemTextLayout + '" style="' + listItemTextSize + '">' + labelText + '</span>' +
                            '<span class="mdc-list-item__secondary-text ' + listItemSubTextLayout + '" style="' + listItemSubTextSize + '">' + subLabelText + '</span>' +
                        '</span>';

                    itemClass.concat(' mdc-list--two-line')
                } else {
                    labelElement = '<span class="mdc-list-item__text ' + listItemTextLayout + '" style="' + listItemTextSize + '">' + labelText + '</span>';
                }
                
                let divider = '';
                if (data.attr('dividers' + i) === true || data.attr('dividers' + i) === 'true'){

                    if (this.data.listItemDividerStyle === 'standard'){
                        divider = '<hr class="mdc-list-divider">'
                    } else {
                        divider = '<hr class="mdc-list-divider mdc-list-divider--' + this.data.listItemDividerStyle + '">'
                    }
                }

                let typeElement = '';
                if (this.data.listType === 'text'){
                    listNoneInteractive = 'mdc-list--non-interactive';

                } else if (this.data.listType === 'checkbox'){
                    itemRole = 'role="checkbox"';

                    typeElement =
                        '<div class="mdc-checkbox mdc-list-item__meta" style="' + colorCheckBox + '"> ' +
                            '<input type="checkbox" class="mdc-checkbox__native-control" tabindex="-1" data-oid="' + data.attr('oid' + i) + '" itemindex="' + i + '">' +
                            '<div class="mdc-checkbox__background">' +
                                '<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">' +
                                    '<path class="mdc-checkbox__checkmark-path" fill="none" stroke="white" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>' +
                                '</svg>' +
                            '</div>' +
                        '</div>';

                } else if (this.data.listType === 'switch'){
                    itemRole = 'role="switch"';
                    
                    typeElement =
                        '<div class="mdc-switch mdc-list-item__meta" style="' + colorCheckBox + '">' +
                            '<div class="mdc-switch__track"></div>' +
                            '<div class="mdc-switch__thumb-underlay">' +
                                '<div class="mdc-switch__thumb">' +
                                    '<input type="checkbox" id="basic-switch" class="mdc-switch__native-control" role="switch" data-oid="' + data.attr('oid' + i) + '" itemindex="' + i + '">' +
                                '</div>' +
                            '</div>' +
                        '</div>'
                }


                let tabIndex = '';
                if (i === 0){
                    tabIndex = 'tabindex="0"';
                }

                let item = 
                    header + 
                    '<li class="' + itemClass + '" ' + tabIndex + ' ' + itemRole +' id="listItem_' + i + '" data-oid="' + data.attr('oid' + i) + '" listitemindex="' + i + '" style="' + itemHeight + listItemBackground + '">' + 
                        imageLeftElement +
                        labelElement + 
                        typeElement +
                    '</li>' + 
                    divider;

                itemList.push(item);
            }
        %>

        <div class="vis-widget materialdesign-list <%== listLayout %> <%== this.data.attr('class') %>" style="width:400px; height: 270px;" id="<%= this.data.attr('wid') %>">
            <ul class="mdc-list <%== listNoneInteractive %>" <%= (el) -> vis.binds.materialdesign.mdcList(el, data) %>>   
                <%== itemList.join('') %>
            </ul>
        </div>

</script> 

